<Ui xmlns="http://www.blizzard.com/wow/ui/" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/ ..\FrameXML\UI.xsd">

  <!-- Main Frame -->

  <Frame name="FarmLogFrame_Main">
    <Scripts>
      <OnLoad>
        self:RegisterEvent("ADDON_LOADED");
        self:RegisterEvent("CHAT_MSG_LOOT");
        self:RegisterEvent("LOOT_OPENED")
        self:RegisterEvent("PLAYER_ENTERING_WORLD");
        self:RegisterEvent("CHAT_MSG_COMBAT_XP_GAIN")
        self:RegisterEvent("CHAT_MSG_COMBAT_HONOR_GAIN")
        self:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED")
        self:RegisterEvent("CHAT_MSG_CURRENCY")
        self:RegisterEvent("CHAT_MSG_MONEY")
        self:RegisterEvent("CHAT_MSG_SKILL")
        self:RegisterEvent("UNIT_SPELLCAST_SENT")
        self:RegisterEvent("CHAT_MSG_COMBAT_FACTION_CHANGE")
        self:RegisterEvent("CHAT_MSG_OPENING")
        self:RegisterEvent("PLAYER_LOGOUT")
        self:RegisterEvent("UPDATE_INSTANCE_INFO")
      </OnLoad>
      <OnEvent>
        self:OnEvent(event, ...)
      </OnEvent>
      <OnUpdate>
        self:OnUpdate()
      </OnUpdate>
    </Scripts>
  </Frame>

  <!-- Minimap Button -->

  <Button name="FarmLogFrame_MinimapButton" parent="Minimap" frameStrata="LOW" enableMouse="true" movable="true">
    <Size>
      <AbsDimension x="31" y="31"/>
    </Size>
    <HighlightTexture file="Interface\Minimap\UI-Minimap-ZoomButton-Highlight" alphaMode="ADD" />
    <Anchors>
      <Anchor point="RIGHT" relativeTo="Minimap" relativePoint="LEFT" />
    </Anchors>
    <Layers>
      <Layer level="BACKGROUND">
        <Texture name="FarmLogFrame_MinimapButtonIcon" file="Interface\AddOns\FarmLog\FarmLogIconOFF">
          <Anchors>
            <Anchor point="TOPLEFT">
              <Offset>
                <AbsDimension x="6" y="-6"/>
              </Offset>
            </Anchor>
            <Anchor point="BOTTOMRIGHT">
              <Offset>
                <AbsDimension x="-6" y="6"/>
              </Offset>
            </Anchor>
          </Anchors>
        </Texture>
      </Layer>
      <Layer level="OVERLAY">
        <Texture name="FarmLogFrame_MinimapButtonOverlay" file="Interface\Minimap\MiniMap-TrackingBorder">
          <Size>
            <AbsDimension x="53" y="53"/>
          </Size>
          <Anchors>
            <Anchor point="TOPLEFT" />
          </Anchors>
        </Texture>
      </Layer>
    </Layers>
    <Scripts>
      <OnLoad>
				self:RegisterForClicks("LeftButtonUp", "RightButtonUp")
				self:RegisterForDrag("LeftButton")
      </OnLoad>
      <OnDragStart>
        self:StartMoving()
      </OnDragStart>
      <OnDragStop>
        self:StopMovingOrSizing()
        self:DragStopped()  
      </OnDragStop>
      <OnClick>
        self:Clicked(button)
      </OnClick>
    </Scripts>
    <Frames>
    </Frames>
  </Button>

  <!-- Question Dialog -->

  <Frame name="FarmLogFrame_QuestionDialog" parent="UIParent" enableMouse="true" movable="true">
    <Size>
      <AbsDimension x="160" y="100"/>
    </Size>
    <Backdrop bgFile="Interface/Tooltips/UI-Tooltip-Background" edgeFile="Interface/DialogFrame/UI-Dialogbox-Border" tile="true">
      <EdgeSize>
        <AbsValue val="16"></AbsValue>
      </EdgeSize>
      <TileSize>
        <AbsValue val="16" />
      </TileSize>
      <BackgroundInsets>
        <AbsInset left="4" right="4" top="4" bottom="4" />
      </BackgroundInsets>
    </Backdrop>
    <Anchors>
      <Anchor point="CENTER">
        <Offset>
          <AbsDimension x="0" y="100"/>
        </Offset>
      </Anchor>
    </Anchors>
    <Scripts>
      <OnLoad>
        self:SetBackdropColor(0, 0, 0, 0.9);
        self:RegisterForDrag("LeftButton")
        self:SetUserPlaced(true)
        tinsert(UISpecialFrames, self:GetName())
      </OnLoad>
      <OnDragStart>
        self:StartMoving()
      </OnDragStart>
      <OnDragStop>
        self:StopMovingOrSizing()
      </OnDragStop>
    </Scripts>
    <Frames>
      <Frame name="$parent_Title">
        <Size>
          <AbsDimension x="120" y="25"/>
        </Size>
        <Backdrop bgFile="Interface/Tooltips/UI-Tooltip-Background" edgeFile="Interface/DialogFrame/UI-Dialogbox-Border" tile="true">
          <EdgeSize>
            <AbsValue val="16"></AbsValue>
          </EdgeSize>
          <TileSize>
            <AbsValue val="16" />
          </TileSize>
          <BackgroundInsets>
            <AbsInset left="4" right="4" top="4" bottom="4" />
          </BackgroundInsets>
        </Backdrop>
        <Anchors>
          <Anchor point="TOP">
            <Offset>
              <AbsDimension x="0" y="10"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnLoad>
            self:SetBackdropColor(0, 0, 0, 0.9);
          </OnLoad>
        </Scripts>
        <Layers>
          <Layer level="BACKGROUND">
            <FontString name="$parent_TitleText" inherits="ChatFontNormal" text="Reset">
              <Color r="1" g="0" b="0"/>
              <Anchors>
                <Anchor point="CENTER" />
              </Anchors>
            </FontString>
          </Layer>
        </Layers>
      </Frame>      <!--$parent_Title-->
      <Button name="$parent_Close" inherits="UIPanelButtonTemplate" text="X">
        <Size>
          <AbsDimension x="15" y="15"/>
        </Size>
        <Anchors>
          <Anchor point="TOPRIGHT">
            <Offset>
              <AbsDimension x="-5" y="-5"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            FarmLogFrame_QuestionDialog:Hide()
          </OnClick>
        </Scripts>
      </Button>      <!--$parent_Close-->
      <Button name="$parent_No" inherits="UIPanelButtonTemplate" text="No">
        <Size>
          <AbsDimension x="70" y="20"/>
        </Size>
        <Anchors>
          <Anchor point="BOTTOMRIGHT">
            <Offset>
              <AbsDimension x="-7" y="5"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            FarmLogFrame_QuestionDialog:Hide()
          </OnClick>
        </Scripts>
      </Button>      <!--$parent_No-->
      <Button name="$parent_Yes" inherits="UIPanelButtonTemplate" text="Yes">
        <Size>
          <AbsDimension x="70" y="20"/>
        </Size>
        <Anchors>
          <Anchor point="BOTTOMLEFT">
            <Offset>
              <AbsDimension x="7" y="5"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            FarmLogFrame_QuestionDialog:Hide()
          </OnClick>
        </Scripts>
      </Button>      <!--$parent_Yes-->
    </Frames>
    <Layers>
      <Layer level="BACKGROUND">
        <FontString name="$parent_Question" inherits="ChatFontNormal" text="Reset?">
          <Color r="1" g="1" b="1"/>
          <Anchors>
            <Anchor point="CENTER" />
          </Anchors>
        </FontString>
      </Layer>
    </Layers>
  </Frame>  <!--FarmLogFrame_QuestionDialog-->


  <Frame name="FarmLogFrame_MainWindow" parent="UIParent" frameStrata="MEDIUM" enableMouse="true" movable="true" resizable="true">
    <Size>
      <AbsDimension x="160" y="100"/>
    </Size>
    <ResizeBounds>
      <minResize x="300" y="200" />
    </ResizeBounds>
    <Backdrop bgFile="Interface/Tooltips/UI-Tooltip-Background" edgeFile="Interface/DialogFrame/UI-Dialogbox-Border" tile="true">
      <EdgeSize>
        <AbsValue val="16"></AbsValue>
      </EdgeSize>
      <TileSize>
        <AbsValue val="16" />
      </TileSize>
      <BackgroundInsets>
        <AbsInset left="4" right="4" top="4" bottom="4" />
      </BackgroundInsets>
    </Backdrop>
    <Scripts>
      <OnLoad>
        self:SetMaxResize(GetScreenWidth() - 50, GetScreenHeight() - 50);
        self:SetBackdropColor(0, 0, 0, 0.9);
        self:SetUserPlaced(true)
        tinsert(UISpecialFrames, self:GetName())
      </OnLoad>
      <OnSizeChanged>
        FarmLogFrame_MainWindow_ScrollContainer_Content:SetWidth(FarmLogFrame_MainWindow:GetWidth() - 30);
        FarmLogFrame_MainWindow_ScrollContainer:SetWidth(FarmLogFrame_MainWindow_ScrollContainer_Content:GetWidth() - 18);
        FarmLogFrame_MainWindow_ScrollContainer:SetHeight(FarmLogFrame_MainWindow:GetHeight() - 65);
        <!-- FLogOptionsFrame:SetWidth(FarmLogFrame_MainWindow:GetWidth()); -->
        <!-- FLogHelpFrame:SetWidth(FarmLogFrame_MainWindow:GetWidth()); -->
        <!-- for i = 1 , #FLogFrameSChildContentTable do
          FLogFrameSChildContentTable[i][0]:SetWidth(FarmLogFrame_MainWindow_ScrollContainer_Content:GetWidth() - 20);
        end -->
      </OnSizeChanged>
    </Scripts>

    <Frames>
      <Frame name="$parent_Title" enableMouse="true" movable="true" resizable="true">
        <Size>
          <AbsDimension x="120" y="25"/>
        </Size>
        <Anchors>
          <Anchor point="TOP">
            <Offset>
              <AbsDimension x="0" y="10"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Backdrop bgFile="Interface/Tooltips/UI-Tooltip-Background" edgeFile="Interface/DialogFrame/UI-Dialogbox-Border" tile="true">
          <EdgeSize>
            <AbsValue val="16"></AbsValue>
          </EdgeSize>
          <TileSize>
            <AbsValue val="16" />
          </TileSize>
          <BackgroundInsets>
            <AbsInset left="4" right="4" top="4" bottom="4" />
          </BackgroundInsets>
        </Backdrop>
        <Scripts>
          <OnLoad>
            self:SetBackdropColor(0, 0, 0, 0.9);
            self:RegisterForDrag("LeftButton")
          </OnLoad>
          <OnDragStart>
            FarmLogFrame_MainWindow:StartMoving()
            self:SetBackdropColor(1, 1, 1, 0.9)
          </OnDragStart>
          <OnDragStop>
            self:DragStopped()
          </OnDragStop>
          <OnEnter>
            self:SetBackdropColor(1 ,1 ,1 ,0.9)
          </OnEnter>
          <OnLeave>
            if not IsMouseButtonDown("LeftButton") then
              self:SetBackdropColor(0, 0, 0, 0.9);
            end
          </OnLeave>
        </Scripts>
        <Layers>
          <Layer level="BACKGROUND">
            <FontString name="$parent_Text" inherits="ChatFontNormal" text="FarmLog">
              <Color r="1" g="0" b="0"/>
              <Anchors>
                <Anchor point="CENTER" />
              </Anchors>
            </FontString>
          </Layer>
        </Layers>
      </Frame>      <!--$parent_Title-->

      <Button name="$parent_CloseButton" inherits="UIPanelButtonTemplate" text="X">
        <Size>
          <AbsDimension x="20" y="20"/>
        </Size>
        <Anchors>
          <Anchor point="TOPRIGHT">
            <Offset>
              <AbsDimension x="-5" y="-5"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            FarmLogFrame_MainWindow:Hide()
          </OnClick>
        </Scripts>
      </Button>      <!--$parent_CloseButton-->

      <ScrollFrame name="$parent_ScrollContainer" inherits="UIPanelScrollFrameTemplate" enableMouse="true">
        <Anchors>
          <Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT">
            <Offset>
              <AbsDimension x="10" y="-25"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnLoad>
            self:SetWidth(FarmLogFrame_MainWindow:GetWidth() - 48)
            self:SetHeight(FarmLogFrame_MainWindow:GetHeight() - 65)
            self:SetHorizontalScroll(0)
            self:SetVerticalScroll(20)
          </OnLoad>
        </Scripts>
        <ScrollChild>
          <Frame name="$parent_Content">
            <Anchors>
              <Anchor point="TOPLEFT" />
            </Anchors>
            <Scripts>
              <OnLoad>
                self:SetHeight(50)
                self:SetWidth(FarmLogFrame_MainWindow:GetWidth() - 30)
              </OnLoad>
            </Scripts>
          </Frame>
        </ScrollChild>
      </ScrollFrame>      <!--$parent_ScrollContainer-->

      <Button name="$parent_ResetButton" inherits="UIPanelButtonTemplate" text="Reset">
        <Size>
          <AbsDimension x="105" y="20"/>
        </Size>
        <Anchors>
          <Anchor point="BOTTOM">
            <Offset>
              <AbsDimension x="-55" y="10"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            self:Clicked()
          </OnClick>
        </Scripts>
      </Button>      <!--$parent_ResetButton-->

      <Button name="$parent_SessionsButton" inherits="UIPanelButtonTemplate" text="Sessions">
        <Size>
          <AbsDimension x="105" y="20"/>
        </Size>
        <Anchors>
          <Anchor point="BOTTOM">
            <Offset>
              <AbsDimension x="55" y="10"/>
            </Offset>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            self:Clicked()
          </OnClick>
        </Scripts>
      </Button>

      <Button name="$parent_Resize">
        <Size>
          <AbsDimension x="16" y="16"/>
        </Size>
        <Anchors>
          <Anchor point="BOTTOMRIGHT" relativeTo="$parent" relativePoint="BOTTOMRIGHT">
            <Offset>
              <AbsDimension x="-2" y="-2"/>
            </Offset>
          </Anchor>
        </Anchors>
        <NormalTexture file="Interface\AddOns\FarmLog\FarmLogResizeButton" />
        <HighlightTexture file="Interface\AddOns\FarmLog\FarmLogResizeButton" />
        <Scripts>
          <OnMouseDown>
            FarmLogFrame_MainWindow:StartSizing("BOTTOMRIGHT")
          </OnMouseDown>
          <OnMouseUp>
            FarmLogFrame_MainWindow:StopMovingOrSizing()
            FarmLogFrame_MainWindow_ScrollContainer_Content:SetWidth(FarmLogFrame_MainWindow:GetWidth() - 30)
            FarmLogFrame_MainWindow_ScrollContainer:SetWidth(FarmLogFrame_MainWindow_ScrollContainer_Content:GetWidth() - 18)
            FarmLogFrame_MainWindow_ScrollContainer:SetHeight(FarmLogFrame_MainWindow:GetHeight() - 65)
            self:MouseUp()
          </OnMouseUp>
        </Scripts>
      </Button>

    </Frames>
  </Frame>  <!--FarmLogFrame_MainWindow-->

  <Frame name="FarmLogFrame_Options">
  </Frame>  <!---->

  <Script file="Deformat.lua"/>
  <Script file="Localization.lua"/>
  <Script file="FarmLog.lua"/>

</Ui>